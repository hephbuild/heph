edition = "2023";

package heph.core.v1;
import "heph/plugin/v1/driver.proto";
import "heph/plugin/v1/plugin.proto";
import "heph/plugin/v1/tref.proto";
import "google/protobuf/go_features.proto";
option features.(pb.go).api_level = API_HYBRID;

message StackRecursionError {
  string stack = 1;
}

message ResultRequest {
  string request_id = 1;
  oneof of {
    heph.plugin.v1.TargetRef ref = 2;
    heph.plugin.v1.TargetSpec spec = 3;
  }
}

message ResultResponse {
  repeated heph.plugin.v1.Artifact artifacts = 1;
  heph.plugin.v1.TargetDef def = 2;
}

service ResultService {
  rpc Get(ResultRequest) returns (ResultResponse) {}
}
